<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-5">
  <div class="container my-1">
    <a class="navbar-brand btn btn-outline-warning" href="/"><strong>Blog</strong></a>
    <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
            <a class="nav-link" href="/">首页 <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">文章 <span class="sr-only">(current)</span></a>
          <!-- <a class="nav-link" href="/posts" @click="setActive('posts')" :class="{ active: isActive('posts') }">
            文章 <span class="sr-only">(current)</span>
          </a> -->
        </li>
      </ul>

      <div class="navbar-nav flex-row">
        <% if(currentUser) {%>
          <!-- Action: add article -->
          <li class="nav-item dropdown mr-sm-2">
            <a class="nav-link dropdown-toggle" href="#" id="cmsMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="fa fa-plus fa-fw"></i>
            </a>
            <div class="dropdown-menu" aria-labelledby="cmsMenuLink">                
              <a class="dropdown-item" href="/posts/create">写文章</a>
            </div>
          </li>

          <!-- user menu: log out -->
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
              <%= currentUser.name %>
            </a>
            <div id="my" class="dropdown-menu"  aria-labelledby="navbarDropdown">
              <button class="dropdown-item" type="button" v-on:click="signout">退出</button>
            </div>
            <script type="text/javascript">
              new Vue({
                el: '#my',
                methods: {
                  signout() {
                    axios.post('/api/v1/signout')
                      .then(function () {
                        window.location = '/';
                      })
                      .catch(function (err) {
                        console.log(err);
                      })
                  }
                }
              });
            </script>
          </li>
        <% } else { %>
          <a class="btn btn-outline-warning my-2 my-sm-0 mr-2" href="/signin">登录</a>
          <a class="btn btn-outline-warning my-2 my-sm-0" href="/signup">注册</a>
        <% } %>
      </ul>
    </div>
  </div>
</nav>

<!-- <script>
const vm = new Vue({
  el: '#app',
  data: {
    activeMenu: '',
  },
  methods: {
    isActive(menuItem){
      return this.activeMenu === menuItem;
    },
    setActive(menuItem){
      this.activeMenu = menuItem;
    }
  }
})
</script> -->